@let market = _market();

@if (market !== null){
    <h1>{{ market.name }}</h1>
    <app-market-select-currency [projectId]="market.projectId" [marketId]="market.marketId" [(currencyId)]="_currencyId"></app-market-select-currency>
    
    <app-separator type="horizontal"></app-separator>

    <app-market-rename [marketId]="market.marketId" (renamed)="_updateName($event)"></app-market-rename>

    <app-separator type="horizontal"></app-separator>

    <app-market-catalog-item-create [marketId]="market.marketId" [currencyId]="_currencyId()"></app-market-catalog-item-create>

    <app-separator type="horizontal" [isInvisible]="true"></app-separator>

    <app-market-catalog [isEditMode]="true" [marketId]="market.marketId" [currencyId]="_currencyId()"></app-market-catalog>

    <div class="controls">
        <app-button-control value="Завершить изменения" (click)="_router.goto(`/project/${market.projectId}/market/${market.marketId}`)"></app-button-control>
    </div>
}
@else{
    <app-entity-error type="not-found-or-access-denied"></app-entity-error>
}